from aiogram import Router, Bot
from aiogram.filters import Command, StateFilter
from aiogram.fsm.context import FSMContext
from aiogram.types import Message

from tg_bot.config import Config
from tg_bot.db.sqlite import SQLiteDatabase
from tg_bot.handlers.user import user_start
from tg_bot.misc.throttling import rate_limit


help_router = Router()


@rate_limit(3)
@help_router.message(Command('about'))
async def enter_about(message: Message, state: FSMContext, bot: Bot):
    await message.answer('–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∂–∏–∑–Ω–∏ - —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å –∫—Ä—É–∂–∫–ê–º–∏, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–∞—è —á–∞—Å—Ç—å –∂–∏–∑–Ω–∏ '
                         '—É–∂–µ –ø—Ä–æ–∂–∏—Ç–∞. 1 –∫—Ä—É–∂–æ–∫ —Ä–∞–≤–µ–Ω 1 –Ω–µ–¥–µ–ª–µ –∂–∏–∑–Ω–∏. '
                         '–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è, –º–æ–∂–µ—Ç–µ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è '
                         '–Ω–∞ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—É—é —Ä–∞—Å—Å—ã–ª–∫—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∏ –Ω–∞–±–ª—é–¥–∞—Ç—å, –∫–∞–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä—É–∂–∫–æ–≤ –º–µ–¥–ª–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è. '
                         '–ï—Å–ª–∏ –æ—Ç —ç—Ç–∏—Ö —Ä–∞—Å—Å—ã–ª–æ–∫ –≤–∞–º —Å—Ç–∞–Ω–µ—Ç –≥—Ä—É—Å—Ç–Ω–æ, —Ç–æ –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è. –ò–ª–∏ –º–æ–∂–Ω–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è '
                         '—Å –¥—Ä—É–≥–æ–º —Å—Å—ã–ª–∫–æ–π –Ω–∞ –±–æ—Ç–∞, –ø—É—Å—Ç—å –æ–Ω —Ç–æ–∂–µ –ø–æ–≥—Ä—É—Å—Ç–∏—Ç. –í–º–µ—Å—Ç–µ –≥—Ä—É—Å—Ç–∏—Ç—å –≤–µ—Å–µ–ª–µ–µ. üòä')
    await state.clear()


@rate_limit(3)
@help_router.message(Command('help'))
async def enter_help(message: Message, state: FSMContext, bot: Bot):
    await message.answer('–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ë–æ—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.\n'
                         '–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –±–æ–ª–µ–µ 10 —Å–µ–∫—É–Ω–¥, –∏–ª–∏ –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è –¥—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞,'
                         ' –∏–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ä—É'
                         ' –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –¥–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')
    await state.set_state('help')


@rate_limit(3)
@help_router.message(StateFilter('help'))
async def enter_message(message: Message, state: FSMContext, config: Config, bot: Bot):
    await message.forward(config.tg_bot.admin_ids[0])
    await message.answer('–í–∞—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ. –ß—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ, '
                         '–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–≤–µ—Å—Ç–∏\n–∫–æ–º–∞–Ω–¥—É /help.')
    await state.clear()
